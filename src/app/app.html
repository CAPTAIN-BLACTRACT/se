<main class="container">
  <header>
    <h1>Speak Easy</h1>
    <p>Voice to Text Recorder</p>

  </header>

  @if(speech.error()){
  <div class="error">{{speech.error()}}

  </div>
  }

  <div class="recorder-card">
    <div class="mic-wrapper">
      <button
        class="mic-btn"
        [class.listening]="speech.isListening()"
        (click)="toogleRecording()">

        <span class="icon">{{speech.isListening()? '⏹️': '⏺️'}}</span>

      </button>

      @if(speech.isListening()){
      <div class="ripple">
      </div>
      <div class="ripple delay">

      </div>
      }
    </div>

    <div class="live-text">
      @if(speech.text()){
      <p>{{speech.text()}}</p>
      }@else{
      <p class="placeholder">{{speech.isListening()? 'listening' : 'Tap the mic to start noting'}}</p>

      }

    </div>
    @if(speech.text() && !speech.isListening()){
    <div class="actions">
      <button class="save-btn" (click)="saveNote()">Save Note</button>
      <button class="discard-btn" (click)="speech.text.set('')">Delete</button>


    </div>
    }

  </div>

  <div class="notes-list">
    <h2>History</h2>
    @for(note of savedNotes();track note.id){
    <div class="note-card">
      <p class="note-content">{{note.content}}</p>

      <div class="note-footer">
        <span class="date">{{note.date | date:'short'}}</span>
        <div class="note-actions">
          <button (click)="copyNote(note.content)">Copy</button>
          <button (click)="deleteNote(note.id)">Delete</button>

        </div>

      </div>

    </div>

    }@empty{
    <p class="empty">No notes yet</p>
    }

  </div>

</main>
